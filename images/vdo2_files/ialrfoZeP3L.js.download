;/*FB_PKG_DELIM*/

__d("WAWebDomPlayVideo",["Promise"],(function(a,b,c,d,e,f){var g;function a(a){if(a.__playPromise)return a.__playPromise;var c=new(g||(g=b("Promise")))(function(b,c){function d(c){a.removeEventListener("playing",d),a.removeEventListener("error",e),(!a.videoHeight||!a.videoWidth)&&d(c),delete a.__playPromise,b()}function e(b){a.removeEventListener("playing",d),a.removeEventListener("error",e),delete a.__playPromise,c(b)}a.addEventListener("playing",d);a.addEventListener("error",e);var f=a.play();h(f)&&(a.removeEventListener("playing",d),a.removeEventListener("error",e),f.then(function(){delete a.__playPromise,b()})["catch"](function(b){delete a.__playPromise,c(b)}))});a.__playPromise=c;return c}function h(a){return a&&typeof a.then==="function"}f["default"]=a}),66);
__d("WAWebWamEnumPlaybackOriginType",[],(function(a,b,c,d,e,f){a=Object.freeze({CONVERSATION:1,STATUS:2,CHANNELS:3});f.PLAYBACK_ORIGIN_TYPE=a}),66);
__d("WAWebWamEnumPlaybackStateType",[],(function(a,b,c,d,e,f){a=Object.freeze({IDLE:1,READY_PLAY:2,READY_PAUSE:3,BUFFERING:4,OUTSIDE:5,ENDED:6,ERROR:7});f.PLAYBACK_STATE_TYPE=a}),66);
__d("WAWebMediaStreamPlaybackWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumPlaybackOriginType","WAWebWamEnumPlaybackStateType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MediaStreamPlayback:[1584,{bytesDownloadedStart:[4,a.TYPES.NUMBER],bytesTransferred:[5,a.TYPES.NUMBER],didPlay:[15,a.TYPES.BOOLEAN],forcedPlayCount:[12,a.TYPES.INTEGER],initialBufferingT:[7,a.TYPES.TIMER],mediaSize:[2,a.TYPES.NUMBER],mediaType:[3,d("WAWebWamEnumMediaType").MEDIA_TYPE],overallPlayT:[10,a.TYPES.TIMER],overallT:[1,a.TYPES.TIMER],playbackCount:[14,a.TYPES.INTEGER],playbackError:[17,a.TYPES.INTEGER],playbackOrigin:[16,d("WAWebWamEnumPlaybackOriginType").PLAYBACK_ORIGIN_TYPE],playbackState:[11,d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE],seekCount:[13,a.TYPES.INTEGER],totalRebufferingCount:[9,a.TYPES.INTEGER],totalRebufferingT:[8,a.TYPES.TIMER],videoDuration:[6,a.TYPES.INTEGER]},[1,1,1],"regular"]},{MediaStreamPlayback:[]});g.MediaStreamPlaybackWamEvent=b}),98);
__d("useWAWebMediaStreamPlaybackMetric",["WAWebMediaStreamPlaybackWamEvent","WAWebPipVideoStreaming","WAWebWamEnumMediaType","WAWebWamEnumPlaybackOriginType","WAWebWamEnumPlaybackStateType","react","useLazyRef","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useEffect,j=b.useRef;function k(a){return new(d("WAWebMediaStreamPlaybackWamEvent").MediaStreamPlaybackWamEvent)({playbackOrigin:a,mediaType:d("WAWebWamEnumMediaType").MEDIA_TYPE.VIDEO,didPlay:!1,playbackState:d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.IDLE})}function a(a,b,e,f){f===void 0&&(f=d("WAWebWamEnumPlaybackOriginType").PLAYBACK_ORIGIN_TYPE.CONVERSATION);var g=j(!0),h=c("useLazyRef")(function(){return k(f)});i(function(){if(a==null||!a.startsWith(d("WAWebPipVideoStreaming").VIDEO_STREAM_URL))return;var b=h.current,c=function a(){b.commit(),g.current=!0,h.current=k(f),window.removeEventListener("unload",a)};window.addEventListener("unload",c);return c},[a]);var l=c("useWAWebStableCallback")(function(a){b.current&&(h.current.videoDuration=Math.floor(b.current.duration)),e.onDurationChange==null?void 0:e.onDurationChange(a)}),m=c("useWAWebStableCallback")(function(a){h.current.playbackState=d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PLAY,h.current.didPlay||(h.current.didPlay=!0),e.onPlaying==null?void 0:e.onPlaying()}),n=c("useWAWebStableCallback")(function(a){h.current.playbackState===d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PLAY&&(h.current.playbackState=d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PAUSE),e.onPause==null?void 0:e.onPause(a)}),o=c("useWAWebStableCallback")(function(a){h.current.playbackState=d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.BUFFERING,g.current?h.current.startInitialBufferingT():h.current.startTotalRebufferingT(),e.onWaiting==null?void 0:e.onWaiting(a)}),p=c("useWAWebStableCallback")(function(a){h.current.playbackState=d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PAUSE,g.current?(h.current.markInitialBufferingT(),g.current=!1):h.current.markTotalRebufferingT(),e.onCanPlay==null?void 0:e.onCanPlay(a)}),q=c("useWAWebStableCallback")(function(a){h.current.playbackState=d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.ENDED,e.onEnded==null?void 0:e.onEnded(a)}),r=c("useWAWebStableCallback")(function(a){var c;h.current.playbackState=d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.ERROR;c=(c=(c=(c=b.current)==null?void 0:(c=c.error)==null?void 0:c.code)!=null?c:a.code)!=null?c:null;c!=null&&(h.current.playbackError=c);e.onError==null?void 0:e.onError(a)});return{mediaStreamPlaybackMetricRef:h,wrappedProps:{onDurationChange:l,onPlaying:m,onWaiting:o,onCanPlay:p,onEnded:q,onError:r,onPause:n}}}g.useMediaStreamPlaybackMetric=a}),98);
__d("WAWebBaseVideo.react",["Promise","WAAbortError","WALogger","WAWebDomPlayVideo","WAWebPttAudioChannels","WAWebUA","asyncToGeneratorRuntime","err","react","useWAWebMediaStreamPlaybackMetric","useWAWebOnUnmount","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["srcObject is not supported in video tag while src is not set."]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed! ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["video.play() promise rejected: "," The error code is ","."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["video.play() promise rejected w/ AbortError: ",", error code: ",""]);n=function(){return a};return a}e=j||d("react");var o=i||(i=c("react")),p=e.useEffect,q=e.useImperativeHandle,r=e.useRef;e=o.forwardRef(a);function a(a,e){var f=a.autoPlay,g=a.children,i=a.className,j=a.srcObject;a=babelHelpers.objectWithoutPropertiesLoose(a,["autoPlay","children","className","srcObject"]);var s=a.videoCallbacks,t=babelHelpers.objectWithoutPropertiesLoose(a,["videoCallbacks"]),u=r(0),v=r(null),w=r(null),x=d("useWAWebMediaStreamPlaybackMetric").useMediaStreamPlaybackMetric(a.src,v,a);x=x.wrappedProps;var y=x.onPlaying,z=babelHelpers.objectWithoutPropertiesLoose(x,["onPlaying"]),A=function(a){a=v.current;if(!a)return;if(a.paused)return;a.videoHeight>0&&a.videoWidth>0&&(y==null?void 0:y())},B=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=v.current;if(!a)return(h||(h=b("Promise"))).reject(c("err")("cannot play unmounted video"));if(!a.paused)return(h||(h=b("Promise"))).resolve();a.removeEventListener("playing",A);try{yield c("WAWebDomPlayVideo")(a),a.addEventListener("playing",A),A()}catch(b){var e;a.addEventListener("playing",A);if(b.name===d("WAAbortError").ABORT_ERROR){d("WALogger").WARN(n(),b.message,b.code);return}a=(a=(a=v.current)==null?void 0:(a=a.error)==null?void 0:a.message)!=null?a:"";e=(e=(e=v.current)==null?void 0:(e=e.error)==null?void 0:e.code)!=null?e:"";d("WALogger").WARN(m(),a,e);z.onError==null?void 0:z.onError(b)}});return function(){return a.apply(this,arguments)}}(),C=(x=c("useWAWebStableCallback"))(function(){B()}),D=x(function(){var a=v.current;(a==null?void 0:a.paused)!==!0&&(a==null?void 0:a.pause())}),E=x(function(){var a;return(a=(a=v.current)==null?void 0:a.volume)!=null?a:0}),F=x(function(a){v.current&&(v.current.volume=a)}),G=x(function(){var a;return(a=(a=v.current)==null?void 0:a.muted)!=null?a:!1}),H=x(function(a){v.current&&(v.current.muted=a)}),I=x(function(){var a;return(a=(a=v.current)==null?void 0:a.paused)!=null?a:!0}),J=x(function(){var a;return(a=(a=v.current)==null?void 0:a.currentTime)!=null?a:0}),K=x(function(a){v.current&&(v.current.currentTime=a)}),L=x(function(){var a;return(a=(a=v.current)==null?void 0:a.duration)!=null?a:0}),M=x(function(a){v.current&&(v.current.duration=a)}),N=x(function(){var a=v.current;a&&(a.currentTime=0,D())}),O=x(function(){var a;return(a=(a=v.current)==null?void 0:a.buffered)!=null?a:null}),P=x(function(){return v.current});q(e,function(){return{play:C,pause:D,getPaused:I,getCurrentTime:J,setCurrentTime:K,getDuration:L,setDuration:M,getVolume:E,setVolume:F,getMuted:G,setMuted:H,getBuffered:O,underlyingVideo:P,pauseAndReset:N}},[C,D,I,J,K,L,M,E,F,G,H,O,P,N]);var Q=function a(b){b=v.current;if(!b)return;b.removeEventListener("playing",a);if(!b.videoHeight||!b.videoWidth){D();C();b=6;u.current<b&&u.current++;var c;u.current>1&&u.current<b&&(c="the height and width of the video is not zero, count (larger than 1): "+u.current);u.current>=b&&(c="the height and width of the video is not zero, count larger than "+u.current);c!=null&&d("WALogger").ERROR(l(),c).sendLogs("base-video-non-zero-height-and-width")}},R=function(a,b){if(f!==!0)return;a.removeEventListener("playing",Q);a.addEventListener("playing",Q);var c=a.srcObject;(c!=null||b&&a.paused)&&C()};e=x(function(a){var b;if(a===v.current)return;(b=v.current)==null?void 0:b.removeEventListener("playing",A);w.current==null?void 0:w.current();v.current=a;if(a==null)return;w.current=d("WAWebPttAudioChannels").MainAudioChannel.registerMedia(a);"srcObject"in a&&j?a.srcObject=j:a.src||d("WALogger").WARN(k());a.addEventListener("playing",A);f===!0&&R(a,d("WAWebUA").UA.isGecko||d("WAWebUA").UA.isSafari)});p(function(){var a=v.current;a!=null&&f===!0&&R(a,!0)},[f]);c("useWAWebOnUnmount")(function(){w.current==null?void 0:w.current()});return o.jsx("video",babelHelpers["extends"]({},s,{ref:e,autoPlay:a.src!=null?f:void 0,className:(x=i)!=null?x:"x1lliihq xh8yej3 x5yr21d"},t,z,{children:g}))}a.displayName=a.name+" [from "+f.id+"]";a=e;g["default"]=a}),98);
__d("WAWebOrchestratorJobEventSampling",[],(function(a,b,c,d,e,f){a={sendMessage:10,createLidPnMappings:10,updateLidMetadata:10,getAllUserDisclosures:10,handleBusinessNotification:5,syncMyDeviceList:5,receiptBatcherRunActiveBatches:5,updateDraftMessageChat:5};b={JOB_EVENT_SAMPLING_RATE:a};f["default"]=b}),66);
__d("WAWebPipUrlVideoTag.react",["WAWebBaseVideo.react","WAWebUserPrefsGeneral","lodash","react","useMergeRefs","useWAWebOnUnmount","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useRef,m=b.useState,n=c("lodash").debounce(function(a,b){d("WAWebUserPrefsGeneral").setMediaVolumeSettings(a,b)},500);e=j.forwardRef(a);function a(a,b){var e=babelHelpers["extends"]({},a),f=e.onVolumeChange,g=e.onPlaying,h=e.startTime,i=e.onLoadedMetadata,o=e.onProgress,p=e.onTimeUpdate,q=e.onError,r=l(null);a=c("useMergeRefs")(b,r);b=m(!1);var s=b[0],t=b[1];c("useWAWebOnUnmount")(function(){n.flush()});var u=(b=c("useWAWebStableCallback"))(function(a){var b,c=r.current;(b=e.callbacks)==null?void 0:b.onVolumeChange==null?void 0:b.onVolumeChange(a);if(c){b=c.getVolume();a=c.getMuted();n(b,a);f({volume:b,muted:a})}}),v=b(function(a){if(!s&&a){var b;(b=e.callbacks)==null?void 0:b.onPlaying==null?void 0:b.onPlaying(a);t(!0)}g()}),w=b(function(){r.current&&typeof h==="number"&&r.current.setCurrentTime(h)});b=b(function(a){if(h!=null){var b;w();(b=e.callbacks)==null?void 0:b.onLoadedMetadata(a)}b={duration:a.currentTarget.duration,volume:a.currentTarget.volume,muted:a.currentTarget.muted,videoWidth:a.currentTarget.videoWidth,videoHeight:a.currentTarget.videoHeight};i(b,a)});var x=function(a){if(!r.current)return;a=r.current.getBuffered();var b=[];if(a)for(var c=0;c<a.length;c++)b.push([a.start(c),a.end(c)]);o(b)},y=function(a){a=a.currentTarget.currentTime;p(a)},z=function(a){var b;b=(b=(b=r.current)==null?void 0:(b=b.underlyingVideo())==null?void 0:b.error)!=null?b:null;if(b==null&&a.code!=null){var c;q(a.code);(c=e.callbacks)==null?void 0:c.onError(a);return}q(b==null?void 0:b.code,b==null?void 0:b.message)};k(function(){w()},[h,w]);k(function(){var a=r.current;if(a){var b=d("WAWebUserPrefsGeneral").getMediaVolumeSettings(),c=b.volume;b=b.muted;c!=null&&a.setVolume(c);a.setMuted(b)}},[]);return j.jsx(c("WAWebBaseVideo.react"),{ref:a,src:e.url,poster:e.poster,className:e.className,onVolumeChange:u,onEnded:e.onEnded,onError:z,onPause:e.onPause,onPlaying:v,onProgress:x,onTimeUpdate:y,onLoadedMetadata:b,autoPlay:e.autoPlay,onCanPlay:e.onCanPlay,onWaiting:e.onWaiting,onLoadedData:e.onLoadedData,videoCallbacks:e.callbacks,children:e.children})}a.displayName=a.name+" [from "+f.id+"]";b=e;g["default"]=b}),98);